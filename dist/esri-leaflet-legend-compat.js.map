{"version":3,"file":"esri-leaflet-legend-compat.js","sources":["../src/Services/MapService.js","../src/Tasks/Legend.js","../src/Tasks/Legend/SymbolLegend.js","../src/Tasks/Legend/SymbolRenderer.js","../src/Layers/DynamicMapLayer.js","../src/Layers/FeatureLayer/FeatureLayer.js"],"names":["EsriLeaflet","Services","MapService","include","legend","callback","context","Tasks","Legend","this","run","Task","extend","path","params","f","_service","request","_request","initialize","endpoint","_renderer","SymbolRenderer","prototype","call","cb","error","response","code","_collectLegendFromLayers","metadata","layers","i","len","length","subLayerIds","push","_getLayersLegends","err","layerData","_symbolsToLegends","result","layerDefs","layerDataReceived","data","layer","pop","_getLayerLegend","id","legendReady","layerId","layerType","type","layerName","name","maxScale","minScale","_drawingInfoToLegend","drawingInfo","symbolRendered","image","label","symbol","height","url","imageData","contentType","width","values","value","uniqueValueInfos","_renderSymbol","renderer","slice","render","L","Class","statics","SYMBOL_TYPES","MARKER","LINE","FILL","PICTURE_MARKER","PICTURE_FILL","TEXT","done","canvas","document","createElement","ctx","getContext","_renderMarker","_renderLine","_renderFill","_renderImageMarker","_renderImageFill","_renderText","console","log","_setSize","getImageData","outline","_setOutline","_setRotation","angle","_fillImage","toDataURL","_loadImage","_drawImage","drawImage","rotate","parseFloat","Math","PI","_getImageData","toDImageData","size","Image","src","pattern","createPattern","rect","fillStyle","fill","crossOrigin","onload","onerror","e","indexOf","Date","getTime","Layers","DynamicMapLayer","FeatureLayer"],"mappings":"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","sourcesContent":["EsriLeaflet.Services.MapService.include({\n\n  legend: function(callback, context) {\n    return new EsriLeaflet.Tasks.Legend(this).run(callback, context);\n  }\n\n});\n","EsriLeaflet.Tasks.Legend = EsriLeaflet.Tasks.Task.extend({\n  path: 'legend',\n\n  params: {\n    f: 'json'\n  },\n\n  run: function(callback, context) {\n    if (this._service) {\n      return this._service.request(this.path, this.params, callback, context);\n    } else {\n      return this._request('request', this.path, this.params, callback, context);\n    }\n  }\n\n});\n\nEsriLeaflet.Tasks.legend = function(params) {\n  return new EsriLeaflet.Tasks.Legend(params);\n};\n","EsriLeaflet.Tasks.Legend.include({\n\n  initialize: function(endpoint) {\n    this._renderer = new EsriLeaflet.Tasks.Legend.SymbolRenderer();\n    EsriLeaflet.Tasks.Task.prototype.initialize.call(this, endpoint);\n  },\n\n  run: function(callback, context) {\n    function cb(error, response) {\n      if (error && error.error.code === 400) { // ArcGIS server >=10.0\n        this._collectLegendFromLayers(callback, context);\n      } else {\n        callback.call(context, error, response);\n      }\n    }\n\n    if (this._service) {\n      return this._service.request(this.path, this.params, cb, this);\n    } else {\n      return this._request('request', this.path, this.params, cb, this);\n    }\n  },\n\n  _collectLegendFromLayers: function(callback, context) {\n    this._service.metadata(function(error, response) {\n      if (error) {\n        return callback.call(context, error);\n      }\n      var layers = [];\n      for (var i = 0, len = response.layers.length; i < len; i++) {\n        if (!response.layers[i].subLayerIds) {\n          layers.push(response.layers[i]);\n        }\n      }\n      this._getLayersLegends(layers, function(err, layerData) {\n        if (err) {\n          callback.call(context, err);\n        } else {\n          this._symbolsToLegends(layerData, function(err, result) {\n            callback.call(context, err, {\n              layers: result\n            });\n          });\n        }\n      }, this);\n    }, this);\n  },\n\n  _getLayersLegends: function(layerDefs, callback, context) {\n    var layer = layerDefs.pop();\n    var layerData = [];\n\n    if (!layer) {\n      callback.call(this, null, layerData);\n    }\n\n    // queue\n    function layerDataReceived(err, data) {\n      if (err) {\n        callback.call(context, err);\n      } else {\n        layerData.push(data);\n        layer = layerDefs.pop();\n        if (layer) {\n          this._getLayerLegend(layer, layerDataReceived, this);\n        } else {\n          callback.call(context, null, layerData);\n        }\n      }\n    }\n    this._getLayerLegend(layer, layerDataReceived, this);\n  },\n\n  _getLayerLegend: function(layer, callback, context) {\n    this._service.request(layer.id, {\n      f: 'json'\n    }, callback, context);\n  },\n\n  _symbolsToLegends: function(layerData, callback, context) {\n    var result = [];\n    var layer = layerData.pop();\n\n    function legendReady(err, legend) {\n      if (err) {\n        callback.call(context, err);\n      }\n      result.push({\n        layerId: layer.id,\n        layerType: layer.type,\n        layerName: layer.name,\n        maxScale: layer.maxScale,\n        minScale: layer.minScale,\n        legend: legend\n      });\n\n      layer = layerData.pop();\n      if (layer) {\n        this._drawingInfoToLegend(layer.drawingInfo, legendReady, this);\n      } else {\n        callback.call(context, null, result);\n      }\n    }\n\n    if (layer) {\n      this._drawingInfoToLegend(layer.drawingInfo, legendReady, this);\n    }\n    return result;\n  },\n\n  _drawingInfoToLegend: function(drawingInfo, callback, context) {\n    var uniqueValueInfos = drawingInfo.renderer.type === 'uniqueValue' ?\n      drawingInfo.renderer.uniqueValueInfos.slice() :\n      [drawingInfo.renderer];\n    var legend = [];\n    var symbol = uniqueValueInfos.pop();\n\n    function symbolRendered(error, image) {\n      if (error) {\n        return callback.call(context, error);\n      }\n\n      legend.push({\n        label: symbol.label,\n        height: image.height,\n        url: symbol.symbol.url,\n        imageData: image.imageData,\n        contentType: image.contentType,\n        width: image.width,\n        values: [symbol.value || '']\n      });\n\n      symbol = uniqueValueInfos.pop();\n      if (symbol) {\n        this._renderSymbol(symbol, symbolRendered, this);\n      } else {\n        callback.call(context, null, legend);\n      }\n    }\n\n    if (symbol) {\n      this._renderSymbol(symbol, symbolRendered, this);\n    }\n  },\n\n  _renderSymbol: function(symbol, callback, context) {\n    return this._renderer.render(symbol.symbol, callback, context);\n  }\n\n});\n","EsriLeaflet.Tasks.Legend.SymbolRenderer = L.Class.extend({\n\n  statics: {\n    SYMBOL_TYPES: {\n      MARKER: 'esriSMS',\n      LINE: 'esriSLS',\n      FILL: 'esriSFS',\n      PICTURE_MARKER: 'esriPMS',\n      PICTURE_FILL: 'esriPFS',\n      TEXT: 'esriTS'\n    }\n  },\n\n  render: function(symbol, callback, context) {\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var imageData = symbol.imageData;\n\n    function done(error, imageData) {\n      if (error) {\n        callback.call(context, error);\n      } else {\n        callback.call(context, null, {\n          width: symbol.width,\n          height: symbol.height,\n          imageData: imageData,\n          url: null,\n          contentType: 'image/png'\n        });\n      }\n    }\n\n    if (symbol.imageData) {\n      return done(null, symbol.imageData);\n    }\n\n    switch (symbol.type) {\n      case 'esriSMS':\n        this._renderMarker(ctx, symbol, done);\n        break;\n      case 'esriSLS':\n        this._renderLine(ctx, symbol, done);\n        break;\n      case 'esriSFS':\n        this._renderFill(ctx, symbol, done);\n        break;\n      case 'esriPMS':\n        this._renderImageMarker(ctx, symbol, done);\n        break;\n      case 'esriPFS':\n        this._renderImageFill(ctx, symbol, done);\n        break;\n      case 'esriST':\n        this._renderText(ctx, symbol, done);\n        break;\n      default:\n        break;\n    }\n  },\n\n  _renderText: function(ctx, symbol, callback) {\n    console.log(symbol);\n    this._setSize(ctx, symbol);\n    callback(null, ctx.getImageData(0, 0, symbol.width, symbol.height));\n  },\n\n  _renderFill: function(ctx, symbol, callback) {\n    console.log(symbol);\n    this._setSize(ctx, symbol);\n    callback(null, ctx.getImageData(0, 0, symbol.width, symbol.height));\n  },\n\n  _renderLine: function(ctx, symbol, callback) {\n    console.log(symbol);\n    this._setSize(ctx, symbol);\n\n    callback(null, ctx.getImageData(0, 0, symbol.width, symbol.height));\n  },\n\n  _renderMarker: function(ctx, symbol, callback) {\n    console.log(symbol);\n    this._setSize(ctx, symbol);\n    if (symbol.outline) {\n      this._setOutline(ctx, symbol.outline);\n    }\n    callback(null, ctx.getImageData(0, 0, symbol.width, symbol.height));\n  },\n\n  _renderImageFill: function(ctx, symbol, callback) {\n    this._setRotation(ctx, symbol.angle);\n    if (symbol.imageData) {\n      this._fillImage(ctx, symbol.imageData, symbol, symbol.contentType);\n      callback(null, ctx.toDataURL());\n    } else {\n      this._loadImage(symbol.url, function(err, image) {\n        this._fillImage(ctx, null, symbol, symbol.contentType, image);\n        callback(null, ctx.toDataURL());\n      }, this);\n    }\n  },\n\n  _renderImageMarker: function(ctx, symbol, callback) {\n    this._setSize(ctx, symbol);\n    this._setRotation(ctx, symbol.angle);\n    if (symbol.imageData) {\n      this._drawImage(ctx, symbol.imageData, symbol.contentType);\n      callback(null, ctx.toDataURL());\n    } else {\n      this._loadImage(symbol.url, function(err, image) {\n        ctx.drawImage(image, 0, 0);\n        callback(null, ctx.toDataURL());\n      }, this);\n    }\n  },\n\n  _setSize: function(ctx, symbol) {\n    ctx.width = symbol.width;\n    ctx.height = symbol.height;\n  },\n\n  _setRotation: function(ctx, angle) {\n    ctx.rotate(-parseFloat(angle) * Math.PI / 180);\n  },\n\n  _getImageData: function(ctx, symbol) {\n    return ctx.toDImageData(0, 0, symbol.width, symbol.height);\n  },\n\n  _fillImage: function(ctx, imageData, size, contentType, image) {\n    if (imageData) {\n      image = new Image();\n      image.src = 'data:' + contentType + ';base64,' + imageData;\n    }\n\n    var pattern = ctx.createPattern(image, 'repeat');\n    ctx.rect(0, 0, size.width, size.height);\n    ctx.fillStyle = pattern;\n    ctx.fill();\n  },\n\n  _drawImage: function(ctx, imageData, contentType) {\n    var image = new Image();\n    image.src = 'data:' + contentType + ';base64,' + imageData;\n    ctx.drawImage(image, 0, 0);\n  },\n\n  _loadImage: function(url, callback, context) {\n    var image = new Image();\n    image.crossOrigin = '';\n    image.onload = function() {\n      callback.call(context, null, this);\n    };\n    image.onerror = function(e) {\n      callback.call(context, {\n        code: 500\n      });\n    };\n    image.src = url + (url.indexOf('?') === -1 ? '?' : '&') +\n      'nc=' + (new Date()).getTime();\n  }\n\n});\n","EsriLeaflet.Layers.DynamicMapLayer.include({\n\n  legend: function(callback, context) {\n    return this._service.legend(callback, context);\n  }\n\n});\n","EsriLeaflet.Layers.FeatureLayer.include({\n\n  legend: function() {\n    return this._service.legend();\n  }\n\n});\n"]}